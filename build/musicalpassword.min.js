/*! musicalpassword 2018-12-21 */

!function(r,e,t,s){var l,n="musicalPassword",c=[],u=0,f={"so-c":"s0c.mp3","so-d":"s0d.mp3","so-e":"s0e.mp3","so-f":"s0f.mp3","so-g":"s0g.mp3","so-a":"s0a.mp3","so-b":"s0b.mp3","to-c":"t0c.mp3"},p={"so-c":"C","so-d":"D","so-e":"E","so-f":"F","so-g":"G","so-a":"A","so-b":"B","to-c":"C"},d={"so-c":"P)x!6r","so-d":"R8b]e6","so-e":"FQz_8s","so-f":"zy3-Bv","so-g":"p#2W9A","so-a":"2<r@R9","so-b":"5ZgR_7","to-c":"5?+xU$"},m={67:"so-c",68:"so-d",69:"so-e",70:"so-f",71:"so-g",65:"so-a",66:"so-b",16:"to-c"},g={offset:30,timer:!1,assetsBaseDir:"./assets/",keyslistener:!1};function o(e,t){this.element=e,this.settings=r.extend({},g,t),this._defaults=g,this._name=n,this.init()}r.extend(o.prototype,{init:function(){var n=this;function o(){r(".wf-mp-keyboard").css({display:"none"})}function i(e){var t=n.settings.assetsBaseDir+e;new Audio(t).play()}function a(e){var t=r(n.element),s=t.val()+e;t.val(s),console.log("element value is: "+t.val())}console.log("plugin started..."),r(this.element).attr("readOnly","readOnly"),this.keyboard=r(function(){var e='<div class="wf-mp-keyboard">';return e+='<br><input class="wf-mp-clear" type="button" value="Clear">',n.settings.timer&&(e+='<input class="wf-done-button" type="button" value="Done">'),e+="</div>"}()),r(t.body).append(this.keyboard),r(this.element).on("click",function(){console.log(n.settings);var e=r(n.element).offset(),t=e.top+g.offset;return function(e,t){if(t.find(".wf-mp-keys").length<=0){var s=function(){var e="",t=0;for(var s in p)4==t&&(e+="<br>"),e+=(void 0,'<span class="wf-mp-keys" data-key="'+s+'">'+p[s]+"</span>"),t++;return e}();t.prepend(s),t.on("click",".wf-mp-keys",function(e){return function(e,t){e.stopPropagation();var s=r(t).data("key");null!==f[s]&&(i(f[s]),a(d[s]),n.settings.timer&&(c.push(u),a(u),console.log("Current time "+u),clearInterval(l),u=0,l=setInterval(function(){u++},1e3)))}(e,this),!1}),t.on("click",".wf-mp-clear",function(){return r(n.element).trigger("clearinput.musicalpassword"),r(n.element).attr("value",""),r(n.element).val(""),!1}),t.on("click",".wf-done-button",function(){return r(n.element).trigger("donebuttonpressed.musicalpassword"),clearInterval(l),c.push(u),console.log("Current time "+u),u=0,o(),!1})}}(0,n.keyboard),o(),n.keyboard.css({display:"inline-block",top:t+"px",left:e.left+"px"}),!1}),r(t).on("click",function(){o()}),this.settings.keyslistener&&r(this.element).on("keydown",function(e){return function(e){console.log("keypress",e);var t=m[e];void 0!==t&&(i(f[t]),a(d[t]))}(e.keyCode||e.charCode),!1})}}),r.fn[n]=function(e){return this.each(function(){r.data(this,"plugin_"+n)||r.data(this,"plugin_"+n,new o(this,e))})}}(jQuery,window,document);